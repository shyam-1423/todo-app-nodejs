<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Edit Task - TaskFlow</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <link rel="stylesheet" href="/styles.css">
</head>

<body>
    <div class="container">
        <div class="header">
            <h1>Edit Task</h1>
            <p>Update your task details</p>
        </div>

        <!-- Edit Task Form -->
        <div class="add-task-form">
            <h3><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
                    stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
                    class="lucide lucide-file-pen-line-icon lucide-file-pen-line">
                    <path d="m18 5-2.414-2.414A2 2 0 0 0 14.172 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2" />
                    <path
                        d="M21.378 12.626a1 1 0 0 0-3.004-3.004l-4.01 4.012a2 2 0 0 0-.506.854l-.837 2.87a.5.5 0 0 0 .62.62l2.87-.837a2 2 0 0 0 .854-.506z" />
                    <path d="M8 18h1" />
                </svg> Edit Task Details</h3>
            <form method="POST" action="/edit/<%= index %>">
                <div class="form-grid">
                    <div class="form-group">
                        <label>Task Name</label>
                        <input type="text" name="text" value="<%= task.text %>" placeholder="Enter task description"
                            required>
                    </div>
                    <div class="form-group">
                        <label>Category</label>
                        <input type="text" name="target" value="<%= task.target %>" placeholder="Work, Study, Personal"
                            required>
                    </div>
                    <div class="form-group">
                        <label>Due Date</label>
                        <input type="date" name="dueDate" value="<%= task.dueDate %>" required>
                    </div>
                    <button type="submit" class="btn btn-primary">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
                            stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
                            class="lucide lucide-save-icon lucide-save">
                            <path
                                d="M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z" />
                            <path d="M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7" />
                            <path d="M7 3v4a1 1 0 0 0 1 1h7" />
                        </svg>Save Changes
                    </button>
                </div>
            </form>

            <div style="margin-top: 20px;">
                <a href="/" class="btn btn-info">
                    <svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 24 24" fill="none"
                        stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
                        class="lucide lucide-move-left-icon lucide-move-left">
                        <path d="M6 8L2 12L6 16" />
                        <path d="M2 12H22" />
                    </svg> Back to Tasks
                </a>
            </div>
        </div>

        <!-- Current Task Preview -->
        <div class="task-section">
            <div class="section-header">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
                    stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
                    class="lucide lucide-eye-icon lucide-eye">
                    <path
                        d="M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0" />
                    <circle cx="12" cy="12" r="3" />
                </svg>
                <span>Current Task</span>
            </div>
            <div class="task-list">
                <div class="task-item <%= task.completed ? 'completed' : '' %>">
                    <div class="task-content">
                        <div class="task-title">
                            <%= task.text %>
                        </div>
                        <div class="task-meta">
                            <span><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24"
                                    fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                    stroke-linejoin="round" class="lucide lucide-tag-icon lucide-tag">
                                    <path
                                        d="M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z" />
                                    <circle cx="7.5" cy="7.5" r=".5" fill="currentColor" />
                                </svg>
                                <%= task.target %>
                            </span>
                            <span><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24"
                                    fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                    stroke-linejoin="round"
                                    class="lucide lucide-calendar-days-icon lucide-calendar-days">
                                    <path d="M8 2v4" />
                                    <path d="M16 2v4" />
                                    <rect width="18" height="18" x="3" y="4" rx="2" />
                                    <path d="M3 10h18" />
                                    <path d="M8 14h.01" />
                                    <path d="M12 14h.01" />
                                    <path d="M16 14h.01" />
                                    <path d="M8 18h.01" />
                                    <path d="M12 18h.01" />
                                    <path d="M16 18h.01" />
                                </svg> Due: <%= task.dueDate %></span>
                            <span><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24"
                                    fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                    stroke-linejoin="round" class="lucide lucide-circle-plus-icon lucide-circle-plus">
                                    <circle cx="12" cy="12" r="10" />
                                    <path d="M8 12h8" />
                                    <path d="M12 8v8" />
                                </svg> Created: <%= task.createdAt %></span>
                        </div>
                        <div class="countdown">
                            <% if (task.completed) { %>
                                <i class="fas fa-check"></i> Completed
                                <% } else { %>
                                    <% const today=new Date().toISOString().split('T')[0]; const dueDate=new
                                        Date(task.dueDate); const todayDate=new Date(today); const diffTime=dueDate -
                                        todayDate; const diffDays=Math.ceil(diffTime / (1000 * 60 * 60 * 24)); %>
                                        <% if (diffDays < 0) { %>
                                            <i class="fas fa-exclamation-triangle"></i>
                                            <span class="overdue">
                                                <%= Math.abs(diffDays) %> day<%= Math.abs(diffDays)> 1 ? 's' : '' %>
                                                        overdue
                                            </span>
                                            <% } else if (diffDays===0) { %>
                                                <i class="fas fa-bell"></i>
                                                <span class="due-today">Due today</span>
                                                <% } else { %>
                                                    <i class="fas fa-clock"></i>
                                                    <span class="upcoming">
                                                        <%= diffDays %> day<%= diffDays> 1 ? 's' : '' %> left
                                                    </span>
                                                    <% } %>
                                                        <% } %>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="/script.js"></script>
</body>

</html>